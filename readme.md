# プログラムの説明

## 要件

1. インターネット上から複数枚(2～10枚程度)の画像をダウンロードする

2. ダウンロードした画像を、ローカルのファイルシステムに保存する

3. 2で保存した各画像のフォーマット・サイズ(横幅と高さのpx)情報を取得し、CSV形式でファイルに保存する

4. 2で保存した各画像を、グレースケール化し、さらに反時計回りに90度回転させた画像にして、ローカルのファイルシステムに保存する

## 備考

### 各要件について

1. 画像はGoogle検索からダウンロードします。  
検索クエリを引数`--keyword`または`-k`で指定します。  
画像枚数は引数`--num`または`-n`で1〜10の整数から指定します。  
画像枚数を指定しない場合、1枚ダウンロードします。  
画像URLはhttpsから始まるURLのみ対象です。

2. ダウンロードした画像は`{dir}/image`というディレクトリに保存します。  
`{dir}`は引数`--dir`または`-d`で指定します。  
画像URLにリクエストして返却されたレスポンスのステータスコードが200のときのみ保存します。

3. CSVファイルの名前は引数`--csv_filename`または`-c`で指定できます。  
CSVに保存する情報は以下の通りです。
   - 保存した画像ファイルのパス`path`
   - 画像フォーマット`format`
   - 画像の横幅`width`
   - 画像の高さ`height`

4. 変換処理後の画像ファイルは`{dir}/result`というディレクトリに保存されます。

### pythonのバージョン

3.8.5を使用しました。

### その他

存在しないディレクトリを指定する必要があります。  
既存のディレクトリを指定した場合、メッセージが表示され、実行されずにプログラムが終了します。  
このような制約がある理由は以下の通りです。

1. 画像保存の実装が、既存ファイルと同じパスを指定したとき上書きされるようになっている。
2. 既存ディレクトリにある画像ファイルが、保存しようとしている枚数より多い場合、一部のみが上書きされる。
3. 2を防ぐために、既存ディレクトリが指定された場合はその中身を最初に削除することを考えたが、削除すべきでないファイルを削除できてしまう可能性がある（カレントディレクトリや親ディレクトリなど）。
4. 3を防ぐために以下のような策を考えたが、時間が取れなさそうなので断念した。
   - 子ディレクトリのみ指定できるようにする。
   - 既存ディレクトリを指定した場合、上書きするかどうか確認させる。
   - 既存ディレクトリを指定した場合、別名保存にする（例えば、既存ディレクトリ`dir`を指定した場合`dir_`に保存する）。

# 手順

## 1. まず、必要なモジュールをインストールします。

```
pip3 install -r requirements.txt
```

## 2. 引数を指定してプログラムを実行します。

以下のコマンドでプログラムの説明を見ることができます。  
引数などが確認できます。

```
python3 ex_galapagos.py -h
```

以下は、最少限の引数を使ったコマンド例です。  
Google検索に使用するキーワードと、各ファイルを保存するディレクトリ名は必須です。

```
python3 ex_galapagos.py -k 猫 -d cat
```

以下は、全ての引数を使ったコマンド例です。  
画像枚数とCSVファイル名を指定できます。  
Google検索に使用するキーワードは、半角スペース区切りで複数指定可能です。

```
python3 ex_galapagos.py -k 猫 小さい -d cat_small -n 2 -c INFO
```
